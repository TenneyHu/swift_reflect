# Visualiser Documentation

This script provides an interactive command-line interface to visualize and analyze logs generated by 'reflect_summary' and 'reflect_prevk' algorithms.

## Setup
1.  Make sure you have the required libraries: pydantic, Pillow, termcolor.
    ```bash
    pip install pydantic Pillow termcolor
    ```
2.  Run your algorithms to generate `logs/reflect_summary.log` and `logs/reflect_prevk.log`.
3.  Run this script from the `cachesaver` directory:
    ```bash
    python visualiser.py
    ```

The script will automatically load the latest runs from both log files if they exist.

## Commands

-   `ls`:
    List all puzzles found in the current log context and their final status (Won/Failed).

-   `open <puzzle_idx>`:
    Select a puzzle to inspect. Replace `<puzzle_idx>` with a number from the `ls` command.
    **Example:** `open 0`

-   `img`:
    Generate a PNG image diagram for the currently opened puzzle. The image shows the flow of states through the agent over timesteps. The image will be saved in `tmp/<context_name>/pic_<puzzle_idx>.png`.
    **Example:** `img`

-   `s<id>` or `s<id>.<attribute>`:
    Inspect a state. Replace `<id>` with the state number (e.g., s1, s2).
    -   `s<id>`: Prints the entire state object.
    -   `s<id>.<attribute>`: Prints a specific attribute of the state.
    -   **Shortcuts**:
        -   `cs`: `current_state`
        -   `sd`: `serial_data` (to access fields from the original state dictionary)
    -   **Examples**:
        -   `s1`: Prints the whole state object for state s1.
        -   `s1.num_thoughts`: Prints the number of thoughts for state s1.
        -   `s1.sd.puzzle`: Prints the 'puzzle' field from the `serial_data` of state s1.

-   `switch`:
    Switch between the `reflect_summary` and `reflect_prevk` log contexts if both are loaded.

-   `compare`:
    Show a side-by-side comparison of puzzle statuses (Won/Failed/Not found) between `reflect_summary` and `reflect_prevk` logs.

-   `clear`:
    Clear the terminal screen.

-   `q`:
    Quit the visualizer. 